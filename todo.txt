Dokument google:
https://docs.google.com/document/d/10MbrynYjchbdK_8ktb1hMgdaupQAVE-z4DZIZ5x-Pts/edit

TODO:
- jakieś zapisywanie efektów do pliku ?
  może na razie spróbujmy zrobić wszystko z kodu?
  chcemy wizualizację krzywych?

- minimany działający particle system
  - odpryski przy kopaniu tuneli
  - prosty splash z krwią: emiter generuje cząsteczki o różnych wielkościach, wycentrowane
    lęcące w losowych kierunkach
  - płomień bazujący na animowanej teksturze ?
  - wypicie mikstury: emiter po okręgu równomiernie cząstki lecące do zewnątrz; można zrobić dwie warstwy
    jedna pod drugą
  - efekt obszarowy
  - czar leczenia
  - teleport in / out
  - magiczna ochrona: pulsująca biała otoczka
- nie muszę robić edytora do splajnów ani nawet do innych parametrów (można edytować plik tekstowy i
  automatycznie reloadować); Ale przydałaby się chyba prosta wizualizacja splajnów

- minimalny działający program do testowania (w tle powinno się dać wyświetlić scenki z gry, żeby
  od razu było widoczne jak to się komponuje docelowo)
- wykombinowanie jakie te particle mają być
- wykombinowanie jak je parametryzowac
- jak zapisywać konfiguracje efektów do pliku?
- ...
- darmowe teksturki, linki do źródeł?

- POTENCJALNE PROBLEMY:
  - keeperrl działa w dwóch trybach: turowym i real-time; dodatkowo ma tryb pauzy
    systemy cząstek muszą sensownie działać w każdym z tych trybów
  - integracja:
    - int2, float2, operacje matematyczne
    - CSpan<>, Span<>  -> std::span w C++20?
    - generator liczb losowych (Random z libfwk)

------------------------------ Inspiracja ---------------------------------------------------------

- Rimworld
- Terraria ?
- Dead Cells ma niezłe efekty
- Myth fallen lords: miała fajne efekty cząstkowe do walki (śmieci i wpływ granatów na nie)
- Baldur's gate, etc. jeśli chodzi o czary
- TODO: popatrzeć na streamy SplatterCata
- TODO: poszukać więcej fajnych gier top-down... ???


--------------------------------- USE CASE-Y ------------------------------------------------------


Jakie animacje mają działać na systemach cząstek?
- Walka:
  - wymachy bronią, pięścią, etc. (różnie w zależności od tego, czy trafiło czy nie?)
    wymach można zrobić za pomocą cząsteczek lecących po trajektorii zamachu/uderzenia
    wymach jest po stronie atakującego a ew. damage po stronie celu

  - damage na przeciwniku (krew (różne rodzaje))
    trzeba poeksperymentować ? poszukać w necie blood splatów

  - splash effecty: zależnie od rodzaju broni miotanej: fireballe, kwas, atak elektrycznością
    do fireballi przyda się dobra teksturka z animacją płomienia;

  - zgon: co się dzieje jak ktoś umiera? tutaj można dodać wiele fajnych animacji rozpadania się na
    kawałki, eksplodowanie krwią, etc. :)
    kawałki ciał: do tego przydałaby się dobra teksturka (ale w sumie wystarczy kilka pikseli na element)
    w losowych kierunkach rozlatujące się cząsteczki (na mniejszą lub większą odległość);
    Blokery mogą dodatkowo blokować i zmieniać kierunek tych kawałków;
    Kawałki mogą zostawać na dłużej i znikać po kilku minutach; Inne efekty obszarowe cały czas mogłyby na
    nie wpływać (podpiekać, albo przemieszczać)

  
- projectile (strzały, fireballe, magic missle)
    strzała to po prostu obrócona odpowiednio teksturka
    fireball: poszukać w necie fajnych animacji
    magic missle: podobnie; na początek można zrobić jakiś częściowo przezroczysty pocisk w kształcie kuli
    
  - efekty obszarowe: circular blast: powinien wchodzić w interakcję z otoczeniem (blokery dla cząsteczek?)

- Działania postaci:
  - ścinanie drzew: każde uderzenie powinno generować jakieś drobne wióry
    jak to zrobić, żeby fajnie wyglądało? opcje: wycentrowane nad drzewem, kierunkowe: w tym samym lub
    przeciwnym co stoi minion; Można zrobić animację przewracania drzewa, a później dopiero spawnowac deski
    uwaga: dźwięk przy ścinaniu drzewa jest taki sam jak przy kopaniu tunelu; fajnie by było, jakby różne
    metale generowały różne rodzaje dzwięków przy wydobyciu

  - kopanie tuneli: uderzenia powinny generować  odpryski, po zniszczeniu można wygenerować chmurę dymu
    kierunkowy efekt na tym samym kaflu co minion; chmura dymu zamiast ściany

  - umieszczanie obiektów na kaflach: można dodać coś pomiędzy splashem a podmuchem (od spodniej strony),
    tak jakby kurz został zmieciony

  - spanie: zzz

  - wypicie mikstury: jak to dobrze odróżnic od pozostałych efektów ?
    na początku można zrobić kołowy efekt: rozchodzący się do zewnątrz; kolor jakoś identyfikuje miksturę

  - demolowanie otoczenia (mebli, pokoi, pułapek)
    efekty podobne co przy kopaniu tuneli?

  - niszczenie przedmiotów: jak w trakcie walki zostanie zniszczona broń / zbroja, to można to zaznaczyć
    innym efektem


- Czary & pułapki:
  - dobra wizualizacja różnych efektów zaaplikowanych do konkretnych postaci (przyspieszenie, zamrożenie,
    otrucie, etc.)
  - efekty działania pułapek: obszarowe i kierunkowe
  - TODO


- Poruszanie się:
  - jak chodzimy np. po piasku możemy tworzyć małe chmury pyłu
  - po wodzie: kręgi na wodzie; powinny być ograniczone kaflami dookoła
  - na niektórych powierzchniach mogą się pojawiać znikające ślady stóp

- Efekty na scenerii:
  - płonące drzewa ?
  - ślady krwi po walce
  - niektóre cząsteczki mogą emitować światło, to trzeba jakoś zintegrować z keeperem
  - ...

- Samoistne:
  - świetliki w nocy
  - zielone chmurki na bagnach ?
  - ...

- Interfejsowe:
  - jak gracz zaznacza / odznacza jakieś obszary ?
  - jak jest tryb czarowania to np. za kursorem mogą latać jakieś gwiazdki czy coś
  - animacje zaznaczające że dany kwadraw jest w kolejce do zrobienia czegoś...
  - ...


-------------------------- Parametryzacja efektów w grze ------------------------------------------

- najprosztsze: wyświetlenie efektu na jakiejś pozycji na mapie
- projectile: efekt leci od punktu źródłowego do punktu docelowego
- obszarowe: efekt ma się spawnować na podanym zakresie kafli
- obszarowe: efekt wybucha zaczynając od jakiegoś kafla i rozchodzi się na sąsiednie
             blokery w okolicy wpływają na to jak efekt może się rozchodzić
- ten sam efekt może mieć różne kolory, różny czas trwania, różną siłę emisji


--------------------------- Interakcja efektów z innymi systemami w grze --------------------------

- blokery: mogą ograniczać zakres efektu jak i wpływać na tor lotu cząsteczek
- efekty obszarowe: niektóre efekty mogą wpływać na inne: walające się śmieci mogą
  być przesuwane wybuchami fireballi, etc.
- efekty mogą być podpięte do elementu scenerii (krew na podłodze), do kafla (chmura dymu)
  albo do postaci (efekty czarów)
- modyfikacja otoczenia: budowanie murów, wymiana podłogi, umieszczanie obiektów może
  kasować (ale nie musi) efekty które aktualnie są na danym obszarze
- efekty powinny być wyświetlane tylko tam gdzie widzi je gracz; TODO: kwestie wydajnościowe
  później?
- TODO: oświetlenie

